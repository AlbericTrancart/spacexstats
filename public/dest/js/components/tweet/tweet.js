define(["knockout","jquery","text!components/tweet/tweet.html"],function(e,t,r){function a(r){function a(t){this.id=e.observable(t.id),this.text=e.observable(t.text),this.name=e.observable(t.user.name),this.screenName=e.observable(t.user.screen_name),this.createdAt=e.observable(new Date(t.created_at)),this.images=e.observableArray(t.media.entities)}var i=this;i.twitterYears=e.observableArray([]),i.action=r.action,i.tweetUrl=e.observable(),i.tweetUrl.subscribe(function(e){var r=e;if(-1!==r.indexOf("twitter.com")){var n=r.split("/"),s=n[n.length-1];t.ajax("/missioncontrol/create/retrievetweet/"+s,{dataType:"json",type:"GET",success:function(e){i.tweet(new a(e))}})}return!0}),i.tweet=e.observable(),i.init=function(){for(var e=(new Date).getFullYear(),t=2006;e>=t;)i.twitterYears.push(t++)}()}return{viewModel:a,template:r}});