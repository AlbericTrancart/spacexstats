define(["knockout","jquery","text!components/tags/tags.html"],function(t,e,i){function n(i){t.bindingHandlers.resize={update:function(t){n.tags();var i=e(t).parent().width()-e(t).siblings().outerWidth()-1;e(t).css({width:i})}};var n=this;n.availableTags=["elon-musk","falcon-9","reusability","raptor","merlin","crs","commercial-resupply-services","gwynne-shotwell","dragon"],n.tags=t.observableArray(),n.tagInput=t.observable(),n.tagsToBeSubmitted=t.computed(function(){return n.tags().join(" ")}),n.suggestions=t.observableArray(),n.suggestionVisibility=t.observable(!1),n.toggleSuggestionVisibility=function(t,e){return n.suggestionVisibility(!n.suggestionVisibility()),!0},e(window).on("resize",function(){var t=e(".tag-input").parent().width()-e(".tag-input").siblings().outerWidth()-1;e(".tag-input").css({width:t})}),n.removeTag=function(t){n.tags.remove(t)},n.createTag=function(t){return-1==n.tags().indexOf(t)&&t.length>0&&(tagText=e.trim(t.toLowerCase()),n.tags.push(tagText),n.tagInput("")),!0},n.suggestionMousedown=function(t){n.createTag(t),n.updateSuggestionList()},n.tagInputKeyPress=function(t,e){if(" "==e.key||"Enter"==e.key){e.preventDefault();var i=n.tagInput();i=i.replace(/["']/g,""),i=i.trim(),n.createTag(i)}else"Backspace"==e.key&&""==n.tagInput()&&(e.preventDefault(),n.tagInput(n.tags.pop()));return!0},n.updateSuggestionList=function(){var t=[],i=new RegExp(n.tagInput(),"i");t=e.grep(n.availableTags,function(t){return-1==n.tags().indexOf(t)?i.test(t):!1}).slice(0,6),n.suggestions(t)},n.init=function(){var t=i.tags.split(" ");n.tags(t)}()}return{viewModel:n,template:i}});