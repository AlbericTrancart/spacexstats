define(["knockout","dropzone","jquery","text!components/upload/upload.html"],function(e,o,t,n){function r(n){e.bindingHandlers.dropzone={init:function(e){t(e).dropzone({url:n.postLocation})}};var r=this;r.dropzoneId=e.observable(n.dropzoneId),r.postLocation=e.observable(n.postLocation),o.options.uploadFilesDropzone={autoProcessQueue:!1,maxFilesize:1024,addRemoveLinks:!0,uploadMultiple:!0,parallelUploads:5,maxFiles:5,init:function(){var e=this;t("#upload").on("click",function(){e.processQueue()})},successmultiple:function(e,o){var r=!1;t.each(e,function(e,t){if(o.errors){r=!0;var n,i,s,l,a;if(t.previewElement)for(t.previewElement.classList.add("dz-error"),"String"!=typeof o&&o.error&&(o=o.error),l=t.previewElement.querySelectorAll("[data-dz-errormessage]"),a=[],i=0,s=l.length;s>i;i++)n=l[i],a.push(n.textContent=o)}else t.previewElement.classList.add("dz-success")}),r===!0?t.each(e,function(e,o){o.status="queued"}):t.each(o.objects,function(e,o){n.uploadedFiles.push(o)})}}}return{viewModel:r,template:n}});